<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>JavaCC: CharStream Classes MiniTutorial &mdash; Project Kenai</title>
    <link href="https://asset-3.java.net/stylesheets/print_packaged.css?20160708.bf2ac18" media="print" rel="stylesheet" type="text/css" />
    <script src="https://asset-0.java.net/javascripts/head_packaged.js?20160708.bf2ac18" type="text/javascript"></script>
    <script type="text/javascript" src="https://ws.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">
        stLight.options({
            publisher:'bcd30425-1749-43d6-a311-18a82f89771a'
        });
    </script>
    <script type="text/javascript">
//<![CDATA[
var page={"token":"n51DutxXIGJf2kg7GBxTP9wHJWMixsjHjgz30a6EZy4="};
//]]>
</script>
    <script type="text/javascript" charset="utf-8">
      function debug(m){}
    </script>
    
	<link href="/styles.css" media="screen" rel="stylesheet" type="text/css" /> 
 
<!-- Changed by: Michael Van De Vanter, 14-Jan-2003 -->

    <link href="https://java.net/theme/stylesheets/java_net.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="https://java.net/theme/stylesheets/layout.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="https://asset-1.java.net/stylesheets/additions.css?20160708.bf2ac18" media="screen" rel="stylesheet" type="text/css" />
    <!--[if IE]><style type="text/css" media="all">@import "https://java.net/theme/stylesheets/ie.css";</style><![endif]-->
    <!--[if lte IE 6]><style type="text/css" media="all">@import "https://java.net/theme/stylesheets/ie6.css";</style><![endif]-->
    <!--[if IE 7]><style type="text/css" media="all">@import "https://java.net/theme/stylesheets/ie7.css";</style><![endif]-->
    <!--[if IE 8]><style type="text/css" media="all">@import "https://java.net/theme/stylesheets/ie8.css";</style><![endif]-->

    <meta name="keywords" content="" />
    <!-- Anti clickjacking -->
    <style id="antiClickjack">body{display:none !important;}</style>
    <script type="text/javascript">
      if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
      } else {
        top.location = self.location;
      }
    </script>
  </head>
  <body class="front not-logged-in article-type-page one-sidebar">
      <div id="container">
      
      <div id="skip-nav" class="element-invisible">
        <!-- To adjust the display of the skip link see the Advanced theme settings
        (General settings), and never use display:none! -->
        <a href="#main-content">Skip to main content</a>
      </div>
      <div id="leaderboard">
        <div id="block-block-31"  class="block">
          <div class="block-inner">
            <div class="content">
                <a href="https://java.net/people/new">Create Account</a>
  <span class="separator"></span>
  <a href="https://java.net/people/login?original_uri=https%3A%2F%2Fjavacc.java.net%2Fdoc%2FCharStream.html" rel="nofollow">Login</a>
  <span class="separator"></span>
  <a href="https://java.net/projects/help/pages/WebSite#WithNavigation" target="_blank">Help</a>

            </div>
          </div>
        </div>
      </div>
      <div id="header" class="clearfix">
        <div id="branding">
          <div class="logo-site-name">
            <strong>
              <span id="logo">
                <a href="http://www.java.net/" rel="home" class="active">
                  <img alt="java.net - Go to Homepage" border="0" class="logo-link" src="https://java.net/theme/images/logo.png" title="Java.net - Go to the Homepage" />
                </a>
              </span>
            </strong>
          </div>
          <div id="site-slogan">The Source for Java Technology Collaboration</div>
        </div>
        <div id="search-box" class="hide-label">
          <form action="http://www.java.net/search/node" method="post" id="search-theme-form">
            <div id="search">
              <input type="hidden" value="search_form" id="edit-search-form" name="form_id" />
              <div style="margin-left: -10px;" class="checks">
                <span><input type="checkbox" name="type[forum]" id="edit-forums" value="forum" /> Forums</span>
                <span><input type="checkbox" name="type[blog]" id="edit-blogs" value="blog" /> Blogs</span>
                <span><input type="checkbox" name="projects" id="edit-projects" value="project" /> Projects</span>
                <span><input type="checkbox" name="people" id="edit-people" value="people" /> People</span>
              </div>
              <input type="text" class="form-text" id="edit-search-theme-form-1" value="Search All" size="15" onclick="this.value = ''" onblur="if (!this.value) this.value = ''" name="keys" />
              <input type="submit" value="" name="op" title="Search" class="form-submit" alt="Search" />
            </div>
          </form>
        </div>
      </div>
    <div id="primary" class="nav">
      <div id="primary-inner">
                <h2 class="element-invisible">Main Menu</h2>
       <ul class="primary-links clearfix">
          <li class=""><a href="https://about.java.net" title="Return to the java.net homepage" class="active">Home</a></li>
          <li class="active-trail"><a href="https://java.net/projects" title="View the projects hosted on java.net">Projects</a></li>
          <li class=""><a href="https://community.oracle.com/community/java" title="Participate in the java.net forums">Forums</a></li>
          <li class=""><a href="https://java.net/people" title="View all the people involved with java.net">People</a></li>
          <li class=""><a href="https://community.oracle.com/community/java" title="Get involved in your local Java User Group (JUG)">Java User Groups</a></li>
          <li class=""><a href="https://community.oracle.com/community/java/jcp" title="Get involved with the Java Community Process!">JCP</a></li>
          <li class="active-trail"><a href="https://java.net/projects/help/pages/Home" title="Help pages java.net">Help</a></li>
                  </ul>
       </div>
    </div>
    <div id="columns">
      <div class="columns-inner clearfix">
        <div id="content-column">
          <div class="content-inner">
           <div id="navig-breadcrumbs">
              <a href="https://java.net/">java.net</a><span>></span>  <a href="https://java.net/projects">projects</a> >
  <a href="https://java.net/projects/javacc">javacc</a> >
  <a href="https://java.net/projects/javacc/content" class="current">Website</a>

            </div>
            <div id="block-quicktabs-2"  class="block">
              <div class="block-inner">
                <div class="content">
                  <!-- BEGIN CONTENT AREA -->
                  
                  




<div class="contentPadding website">
            

<h1>JavaCC [tm]: CharStream Classes MiniTutorial</h1>
<p>
This document describes in some detail the methods of the CharStream
classes. Note that some of the details may not be relevant for the
CharStream interface (to be used with USER_CHAR_STREAM).
</p>
<p>
There are 4 different kinds of char stream classes that are generated
based on combinations of various options.
</p>
<ul>

  <li> <h3>ASCII_CharStream</h3>

       Generated when neither of the two options - <tt>UNICODE_INPUT</tt>
       or <tt>JAVA_UNICODE_ESCAPE</tt> is set.

<p>

       This class treats the input as a stream of 1-byte (ISO-LATIN1)
       characters. Note that this class can also be used to parse
       binary files. It just reads a byte and returns it as a 16 bit
       quantity to the lexical analyzer. So any character returned by
       this class will be in the range <tt>'\u0000'-'\u00ff'</tt>.

</p>
  </li>
  <li> <h3>ASCII_UCodeESC_CharStream</h3>

       Generated when the option <tt>JAVA_UNICODE_ESCAPE</tt> is set
       and the <tt>UNICODE_INPUT</tt> option is not set.

<p>

       This class treats the input as a stream of 1-byte characters.
       However, the special escape sequence
</p>
<p>
             <tt>("\\\\")* "\\" ("u")+</tt> - (<i>odd number of backslahes followed
       by one or more 'u's.</i>)
</p>
<p>
       is treated as a tag indicating that the next 4 bytes following
       the tag will be hexadecimal digits forming a 4-digit hex number
       whose value will be treated as the value of the character at the
       position indicated by the first backslash. Note that this value
       can be anything in the range <tt>0x0-0xffff</tt>.
</p>

  </li>
  <li> <h3>UCode_CharStream</h3>

       Generated when the option <tt>UNICODE_INPUT</tt> is set and
       the option <tt>JAVA_UNICODE_ESCAPE</tt> is not set.

<p>

       This class treats the input as a stream of 2-byte characters. So
       it reads 2 bytes <tt>b1</tt> and <tt>b2</tt> and returns them as
       a single character using the expression <tt> b1 &lt;&lt; 8 | b2 </tt>
       assuming bigendian order. So in particular all the characters in
       the range <tt>0x00-0xff</tt> are assumed to be stored as 2 bytes
       with the first (higher-order) byte being 0.

</p>
  </li>
  <li> <h3>UCode_UCodeESC_CharStream</h3>

       Generated when both the options <tt>UNICODE_INPUT</tt> and
       <tt>JAVA_UNICODE_ESCAPE</tt> are set.
<p>

       This class input is a stream of 2-byte characters (just
       like the UCode_CharStream class) and the special escape sequence
</p>
<p>
       <tt>("\\\\")* "\\" ("u")+</tt> - (<i>odd number of backslahes followed
       by one or more 'u's.</i>)
</p>
<p>
       is treated as a tag indicating that the next 4 2-byte characters
       following the tag will be hexadecimal digits forming a 4-digit hex
       number whose value will be treated as the value of the character at the
       position indicated by the first backslash. Note that this value
       can be any value in the range <tt>0x0-0xffff</tt>. Also note that
       the backslash(es) and u(s) are all assumed to be given as 2-byte
       characters (with the higher order byte value being 0).

</p>
  </li>
</ul>

<h4>
Note : None of the above classes can be used to read characters in a
       mixed mode, i.e., some characters given as 1-byte characters and others
       as 2-byte characters. To do this, you need to set USER_CHAR_STREAM
       option to true and define your own char stream.
</h4>

<hr />
<p>
(Throughout the following, we use the notation XXXCharStream that stands
 for any of the above described 4 classes.)
</p>
<h3>Constructors</h3>
<ul>

  <li><tt>
  public XXXCharStream(java.io.InputStream dstream,
                                        int startline, int startcolumn)
</tt>

<p>
  Takes an input stream, starting line and column numbers and constructs a
  CharStream object. It also creates buffers of initial size 4K for buffering the
  characters and also for line and column numbers for each of those characters.

</p>
  </li>

  <li><tt> public XXXCharStream(java.io.InputStream dstream,
                                        int startline, int startcolumn, int buffersize)
</tt>

<p>
  Takes an input stream, starting line and column numbers and constructs a
  CharStream object. It also creates buffers of initial size <tt>buffsize</tt> for buffering the
  characters and also for line and column numbers for each of those characters.
</p>
<p>
  So when you have an estimate on the maximum size of any token that can occur,
  you can use that size to optimize the buffer sizes. Note, however, that
  these sizes are only initial sizes and they will be expanded as and when
  needed (in 2K steps).
</p>
 </li>
</ul>

<h3>Methods</h3>
<p>
All the following methods will be static or nonstatic depending on
whether the STATIC option is true or false at the generation time. Also only
those methods that users can use in their lexical actions (using the
<tt>input_stream</tt> variable of the lexical analyzer) are documented
here. Rest of the (public) methods are very tightly coupled with the
implementation of the lexical analyzer and thus <b> should not </b> be
used in lexical actions. In the future when we adopt version 1.1 of the Java [tm] programming language, we will
streamline this by making that part of the interface an innerclass to
the lexical analyzer.
</p>
<ul>

  <li> <tt>public final char readChar() throws java.io.IOException</tt>
<p>

       This method returns the next "character" in the input according
       to the rules of the CharStream class as described above. It will
       throw <tt>java.io.IOException</tt> if it reaches EOF during the
       process of "constructing" the character. It also updates the line
       and column number and buffers the character for any possible
       backtracking that may be required later. It also stores the line
       and column numbers for the same purpose.
</p>
  </li>
  <li> <tt> public final int getBeginLine() </tt>

<p>
       This method returns the line number for the beginning of the
       current match.
</p>
 </li>
 <li> <tt> public final int getBeginColumn() </tt>

<p>
       This method returns the column number for the beginning of the
       current match.
</p>
  </li>
  <li> <tt> public final int getEndLine() </tt>

<p>
       This method returns the line number for the ending of the
       current match.

</p>
  </li>
  <li> <tt> public final int getEndColumn() </tt>

<p>
       This method returns the column number for the ending of the
       current match.
</p>
  </li>
  <li> <tt> public final void backup(int amount) </tt>

<p>
       This method puts back <tt>amount</tt> number of characters
       into the stream. Note that the amount indicates the number
       of characters as constructed by <tt>readChar</tt>. Since the
       buffers used are circular buffers, it cannot check for
       illegal <tt>amount</tt> values, it just wraps around. So it
       is the user's responsibility to make sure that those many
       characters are really produced before a call to this method.
</p>
  </li>
  <li><tt> public final String GetImage()</tt>

<p>
       Returns the image of the current match. As far as the XXXCharStream
       is concerned, all characters after the last call to the private method
       <tt>BeginToken</tt> are considered a part of the current match.
</p>
  </li>
  <li><tt> public void ReInit(java.io.InputStream dstream,
                                        int startline, int startcolumn)</tt>

<p>

       This method reinitializes the XXXCharStream classes with a (possibly
       new) input stream and starting line and column numbers.
</p>
  </li>
  <li><tt> public void ReInit(java.io.InputStream dstream,
                 int startline, int startcolumn, int buffersize)</tt>

<p>

       This method reinitializes the XXXCharStream classes with a (possibly
       new) input stream and starting line and column numbers and adjusts
       the size of the buffers to <tt>buffersize</tt>, by extending them.
       Note that if the value of <tt>buffersize</tt> is less than the current
       buffer sizes, they remain unchanged.
</p>
   </li>
   <li><tt> public void adjustBeginLineColumn(int newLine, int newCol)</tt>
<p>

       This method adjusts the line and column number of the beginning of
       the current match to <tt>newLine</tt> and <tt>newCol</tt> and
       also adjusts the line and column numbers for all the characters
       in the lookahead buffer.
</p>
   </li>
</ul>


      </div>

                  <!--END CONTENT AREA-->
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="sidebar-first" class="sidebar">
            <div class="vAccordion">      <div id="block-menu-menu-kenai-project-features" class="block">
      <div class="block-inner">
        <h2>Project Features</h2>
        <div class="content" style="text-align: left; margin: 5px;">
          <ul class="menu">
                          
              
                <li class="leaf">
                  <a href="https://java.net/projects/javacc/lists">Mailing Lists</a>
                </li>
                
                            
                          
                            <li><a href="https://java.net/projects/javacc/downloads">Downloads</a></li>
                          
                            <li><a href="http://java.net/jira/browse/JAVACC" target="_blank">JIRA</a></li>
                          
              
                <li class="leaf">
                  <a href="https://java.net/projects/javacc/sources">Source Code Repositories</a>
                </li>
                
                            <li style="margin-left: 12px"><a href="https://java.net/projects/javacc/sources/svn/show">Subversion</a></li>
                          
                            <li><a href="http://javacc.java.net/">javacc.java.net</a></li>
                          
                            <li><a href="https://java.net/projects/javacc/pages/Home">JavaCC 7 Design</a></li>
                      </ul>
        </div>
      </div>
    </div>
  

  <div id="block-menu-menu-kenai-project-about" class="block">
    <div class="block-inner">
      <h2>About this Project</h2>
      <div class="content" style="text-align: left; margin: 5px;">
        <a href="https://java.net/projects/javacc">Check out http://javacc.org</a>
                  is a subproject of
          <a href="https://java.net/projects/javatools">Javatools</a>,
                was started in November 2010
        and has <a href="https://java.net/projects/javacc/members">1016 members</a>.
        The project administrators are
        <a href="https://java.net/people/528626-Glassfish-Kenai-Migration-Admin"><span class="person -kenai-super_glassfish">Glassfish Kenai Migration Admin</span></a>, <a href="https://java.net/people/11961-paulcager"><span class="person -kenai-paulcager">paulcager</span></a>, <a href="https://java.net/people/402-Tom-Copeland"><span class="person -kenai-tcopeland">Tom Copeland</span></a>, and <a href="https://java.net/people/23-sreeni"><span class="person -kenai-sreeni">sreeni</span></a>.
        <br />
        <ul class="menu">
                                    <li class="leaf">
                <a href="https://java.net/projects/javacc/watch">Join This Project</a>
              </li>
                              </ul>
              </div>
    </div>
  </div>
</div>

        </div>
      </div>
    </div>
    <div id="tertiary-content">
      <div id="block-menu-menu-footer-menu"  class="block">
        <div class="block-inner">
          <div class="content">
            <ul class="menu">
              <li class="leaf first">
                <a href="http://www.java.net/contact" title="">Feedback</a>
              </li>
              <li class="leaf">
                <a href="http://www.java.net/javanet-faq" title="">FAQ</a>
              </li>
              <li class="leaf">
                <a href="http://www.java.net/javanet-web-site-terms-use" title="">Terms of Use</a>
              </li>
              <li class="leaf">
                <a href="http://www.oracle.com/us/legal/privacy/index.html" title="">Privacy</a>
              </li>
              <li class="leaf last">
                <a href="http://www.oracle.com/us/legal/third-party-trademarks/index.html" title="">Trademarks</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div id="footer">
      <div id="footer-region">
        <div class="block">
          <div class="block-inner">
            <div class="content">
              <div style="width: 59%; float: left;">
                <p>
                  Your use of this web site or any of its content or software indicates
                  your agreement to be bound by these
                  <a href="http://www.java.net/javanet-web-site-terms-use">Terms of Participation</a>.
                </p>
                <p>
                  Copyright © 2014, Oracle Corporation and/or its affiliates. All rights reserved.
                  Oracle and Java are registered trademarks of Oracle and/or its affiliates.
                  Other names may be trademarks of their respective owners.
                </p>
                <p>(<a href="https://java.net/projects/help/pages/ReleaseNotes">revision 20160708.bf2ac18</a>)</p>
              </div>
              <div style="width: 310px; float: right; text-align: right; margin-right: 10px">
                <div style="float: right;">
                  <a href="http://www.oracle.com" title="Oracle"><img alt="" src="https://java.net/theme/images/oracle.png" /></a>
                  <a href="http://kenai.com" title="Kenai.com"><img alt="" src="https://java.net/theme/images/kenai.png" /></a>
                  <a href="http://www.cognisync.com" title="Cognisync"><img alt="" src="https://java.net/theme/images/cognisync.png" /></a>
                  <br />
                  <div class="powered-by">
                    Powered by Oracle, Project Kenai and Cognisync
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
     </div>
    </div>
        <!-- popups that are anchored to specific elements -->
    <div class="popupMenuShadow" id="contextMenuShadow"></div>
    <div class="popupMenuContainer" id="contextMenu">
      <div class="popupMenu inline">	
        <div class="upArrow"></div>
        <div class="header"></div>
        <div class="contextMenuBody" id="contextMenuBody">&nbsp;</div>
      </div>
    </div> 
    
    <!-- large content loaded via ajax. Faded but not modal. -->
    <div class="jqmWindow" id="jqm_large_overlay">
      <div class="jqmHeader">
        <div class="jqmTitle">&nbsp;</div>
        <img alt="Close" class="jqmClose" src="https://asset-0.java.net/images/close.gif?20160708.bf2ac18" />
      </div>
      <div class="jqmTarget">
        <img alt="loading" src="https://asset-3.java.net/images/activity.gif?20160708.bf2ac18" />
      </div>
      <div class="jqmFooter">
      	<div class="jqmClose functionButtonContainer"><button class="functionButton" title="Done"> Done </button></div>
      </div>
    </div>
    
    <!-- confirmation dialogs with buttons. Faded and modal. -->
    <div class="jqmWindow" id="jqm_dialog">
      <div class="jqmHeader">
        <div class="jqmTitle">Please Confirm</div>
        <img alt="Close" class="jqmClose" src="https://asset-0.java.net/images/close.gif?20160708.bf2ac18" />
      </div>
      <div class="jqmTarget">&nbsp;</div>
      <div class="jqmFooter">
      	<div class="jqmClose functionButtonContainer"><button class="functionButton" id="jq_no_button" title="No" onclick="Modal.no()"> No </button></div>
      	<div class="jqmClose functionButtonContainer"><button class="functionButton" id="jq_yes_button" title="Yes" onclick="Modal.yes();"> Yes </button></div>
      </div>
    </div>    

    <div id="jq-ui-autocomplete-parent"></div>
    
  
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-6400569-8");
        pageTracker._trackPageview();
      } catch(err) {}</script>
  

  </body>
  <script src="https://asset-0.java.net/javascripts/body_packaged.js?20160708.bf2ac18" type="text/javascript"></script>
  <script src="https://java.net/theme/javascript/java_custom.js" type="text/javascript"></script>
  
</html>
